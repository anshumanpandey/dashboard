@{
    ViewBag.Title = "Home Page";
}
@section StyleSection
{
    <link href="~/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
    <style>
        .apexcharts-toolbar {
            right: 20px !important;
        }
        .userChartDetails {
            font-size: 20px !important; color: blue !important;
        }

        .userChartCtegoryDetails {
            font-size: 16px !important;
            color: blue !important;
        }
    </style>
}

<div class="row">
        <div class="col-md-6 pt-5">
            <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile ">
                <div class="kt-portlet__head kt-portlet__head--lg kt-portlet__head--noborder kt-portlet__head--break-sm">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title" style="margin: 0;
                                           padding: 0;
                                           font-size: 1.2rem;
                                           font-weight: 500;
                                           color: #48465b;">
                            Users
                        </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="dropdown dropdown-inline">
                            <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="flaticon-more-1"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md dropdown-menu-fit">

                                <!--begin::Nav-->
                                <ul class="kt-nav">
                                    <li class="kt-nav__head">
                                        Export Options

                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <li class="kt-nav__item">
                                        <a href="#" class="kt-nav__link">
                                            <i class="kt-nav__link-icon flaticon-diagram"></i>
                                            <span class="kt-nav__link-text">Data</span>
                                        </a>
                                    </li>


                                </ul>

                                <!--end::Nav-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-widget21">
                    <div class="kt-widget21__content kt-portlet__space-x">
                        <div class="kt-widget21__item" style="padding-left: 0 !important;">
                            <div class="kt-widget21__info">
                                <span class="kt-widget21__title userChartDetails">
                                    100 Lisence allocated
                                </span>
                                
                            </div>
                        </div>
                        <div class="kt-widget21__item">
                            <div class="kt-widget21__info">
                                <span class="kt-widget21__title userChartCtegoryDetails pull-right">
                                    30 - Used
                                    <br/>
                                    70 - Unused
                                </span>

                            </div>
                            
                        </div>
                    </div>
                    <div class="kt-widget20__chart">
                        <div id="userChart"></div>
                    </div>
                </div>
                @*<div class="kt-portlet__body kt-portlet__body--fit">
                    <div class="row">
                        <div class="col-md-12">

                        </div>
                    </div>
                   
                </div>*@
            </div>
        </div>
        <div class="col-md-6 pt-5">
            <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile ">
                <div class="kt-portlet__head kt-portlet__head--lg kt-portlet__head--noborder kt-portlet__head--break-sm">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title" style="margin: 0;
                                                                                                   padding: 0;
                                                                                                   font-size: 1.2rem;
                                                                                                   font-weight: 500;
                                                                                                   color: #48465b;">
                           AVG Time - Module
                        </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="dropdown dropdown-inline">
                            <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="flaticon-more-1"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md dropdown-menu-fit">

                                <!--begin::Nav-->
                                <ul class="kt-nav">
                                    <li class="kt-nav__head">
                                        Export Options

                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <li class="kt-nav__item">
                                        <a href="#" class="kt-nav__link">
                                            <i class="kt-nav__link-icon flaticon-diagram"></i>
                                            <span class="kt-nav__link-text">Data</span>
                                        </a>
                                    </li>

                                </ul>

                                <!--end::Nav-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div id="avgTimeChartByModule"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6 pt-5">
            <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile ">
                <div class="kt-portlet__head kt-portlet__head--lg kt-portlet__head--noborder kt-portlet__head--break-sm">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title" style="margin: 0;
                                                                                                                                                           padding: 0;
                                                                                                                                                           font-size: 1.2rem;
                                                                                                                                                           font-weight: 500;
                                                                                                                                                           color: #48465b;">
                            Sessions (AVG) by user by module
                        </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="dropdown dropdown-inline">
                            <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="flaticon-more-1"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md dropdown-menu-fit">

                                <!--begin::Nav-->
                                <ul class="kt-nav">
                                    <li class="kt-nav__head">
                                        Export Options

                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <li class="kt-nav__item">
                                        <a href="#" class="kt-nav__link">
                                            <i class="kt-nav__link-icon flaticon-diagram"></i>
                                            <span class="kt-nav__link-text">Data</span>
                                        </a>
                                    </li>


                                </ul>

                                <!--end::Nav-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div id="sessionSvgByUserByModule"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6 pt-5">
            <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile ">
                <div class="kt-portlet__head kt-portlet__head--lg kt-portlet__head--noborder kt-portlet__head--break-sm">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title" style="margin: 0;
                                                                                                                                                                                                                   padding: 0;
                                                                                                                                                                                                                   font-size: 1.2rem;
                                                                                                                                                                                                                   font-weight: 500;
                                                                                                                                                                                                                   color: #48465b;">
                            Users Over Time
                        </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <ul class="nav nav-pills nav-pills-sm nav-pills-label nav-pills-bold" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#kt_widget6_tab1_content" role="tab">
                                    Day
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#kt_widget6_tab2_content" role="tab">
                                    Week
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#kt_widget6_tab3_content" role="tab">
                                    Month
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#kt_widget6_tab3_content" role="tab">
                                    Year
                                </a>
                            </li>
                        </ul>
                        <div class="dropdown dropdown-inline">
                            <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="flaticon-more-1"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md dropdown-menu-fit">

                                <!--begin::Nav-->
                                <ul class="kt-nav">
                                    <li class="kt-nav__head">
                                        Export Options

                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <li class="kt-nav__item">
                                        <a href="#" class="kt-nav__link">
                                            <i class="kt-nav__link-icon flaticon-diagram"></i>
                                            <span class="kt-nav__link-text">Data</span>
                                        </a>
                                    </li>

                                </ul>

                                <!--end::Nav-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div id="usersOverTime"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6 pt-5">
            <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile ">
                <div class="kt-portlet__head kt-portlet__head--lg kt-portlet__head--noborder kt-portlet__head--break-sm">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title" style="margin: 0;
                                                                                                                                                                                                                                                                           padding: 0;
                                                                                                                                                                                                                                                                           font-size: 1.2rem;
                                                                                                                                                                                                                                                                           font-weight: 500;
                                                                                                                                                                                                                                                                           color: #48465b;">
                            AVG Time Spent Module
                        </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <ul class="nav nav-pills nav-pills-sm nav-pills-label nav-pills-bold" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#kt_widget6_tab1_content" role="tab">
                                    Day
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#kt_widget6_tab2_content" role="tab">
                                    Week
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#kt_widget6_tab3_content" role="tab">
                                    Month
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#kt_widget6_tab3_content" role="tab">
                                    Year
                                </a>
                            </li>
                        </ul>
                        <div class="dropdown dropdown-inline">
                            <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="flaticon-more-1"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md dropdown-menu-fit">

                                <!--begin::Nav-->
                                <ul class="kt-nav">
                                    <li class="kt-nav__head">
                                        Export Options

                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <li class="kt-nav__item">
                                        <a href="#" class="kt-nav__link">
                                            <i class="kt-nav__link-icon flaticon-diagram"></i>
                                            <span class="kt-nav__link-text">Data</span>
                                        </a>
                                    </li>


                                </ul>

                                <!--end::Nav-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div id="avgTimeSpentModule"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6 pt-5">
            <div class="kt-portlet kt-portlet--height-fluid kt-portlet--mobile ">
                <div class="kt-portlet__head kt-portlet__head--lg kt-portlet__head--noborder kt-portlet__head--break-sm">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title" style="margin: 0;
                                                                                                                                                                                                                                                                                                                                   padding: 0;
                                                                                                                                                                                                                                                                                                                                   font-size: 1.2rem;
                                                                                                                                                                                                                                                                                                                                   font-weight: 500;
                                                                                                                                                                                                                                                                                                                                   color: #48465b;">
                            Sessions/Events
                        </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="dropdown dropdown-inline">
                            <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="flaticon-more-1"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md dropdown-menu-fit">

                                <!--begin::Nav-->
                                <ul class="kt-nav">
                                    <li class="kt-nav__head">
                                        Export Options

                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <li class="kt-nav__item">
                                        <a href="#" class="kt-nav__link">
                                            <i class="kt-nav__link-icon flaticon-diagram"></i>
                                            <span class="kt-nav__link-text">Data</span>
                                        </a>
                                    </li>

                                </ul>

                                <!--end::Nav-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div id="sessionChart"></div>
                </div>
            </div>
        </div>
    </div>

@section scripts
{
    <script src="~/assets/plugins/global/plugins.bundle.js" type="text/javascript"></script>
    <script src="~/assets/js/scripts.bundle.js" type="text/javascript"></script>
    <script type="text/javascript">
        var userChartOptions = {
            title: {
                // text: 'Users',
                floating: true,
                offsetY: 0,
                align: 'center',
                style: {
                    color: '#444'
                }
            },
            series: [
                {
                    name: 'Used',
                    data: [44, 55, 41]
                }, {
                    name: 'Unused',
                    data: [44, 55, 41]
                }
            ],
            chart: {
                type: 'bar',
                height: 350,
                stacked: true,
                toolbar: {
                    show: false
                },
                zoom: {
                    enabled: true
                }
            },
            responsive: [
                {
                    breakpoint: 480,
                    options: {
                        legend: {
                            position: 'bottom',
                            offsetX: -10,
                            offsetY: 0
                        }
                    }
                }
            ],
            plotOptions: {
                bar: {
                    horizontal: false,
                },
            },
            xaxis: {
                type: 'Category',
                categories: [
                    'Jan', 'Feb', 'Mar'
                ],
                axisBorder: {
                    show: true,

                },
            },
            grid: {
                show: false,
            },
            yaxis: {
                labels: {
                    show: false
                },
                axisBorder: {
                    show: true,
                }
            },
            legend: {
                position: 'right',
                offsetY: 40
            },
            fill: {
                opacity: 1
            }
        };

        var userChart = new ApexCharts(document.querySelector("#userChart"), userChartOptions);
        userChart.render();

        // User chart Ends

        function minTommss(minutes) {
            var sign = minutes < 0 ? "-" : "";
            var min = Math.floor(Math.abs(minutes));
            var sec = Math.floor((Math.abs(minutes) * 60) % 60);
            return sign + (min < 10 ? "0" : "") + min + ":" + (sec < 10 ? "0" : "") + sec;
        }

// m:ss to minute decimal
        function minDecimal(min, sec) {
            return (min + sec * 0.0168).toFixed(2);
        }

        var avgTimeByModuleChartOptions = {
            series: [
                {
                    name: 'AVG Time',
                    data: [minDecimal(10, 00), minDecimal(8, 00), minDecimal(9, 15)]
                }
            ],
            grid: {
                show: false,
            },
            chart: {
                height: 350,
                type: 'bar',
                toolbar: {
                show: false
            },
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        position: 'top', // top, center, bottom
                    },
                }
            },

            xaxis: {
                type: 'category',
                categories: ["ME", "STR", "SJRL"],
                position: 'bottom',
                axisBorder: {
                    show: true
                },
                axisTicks: {
                    show: false
                },
                crosshairs: {
                    fill: {
                        type: 'gradient',
                        gradient: {
                            colorFrom: '#D8E3F0',
                            colorTo: '#BED1E6',
                            stops: [0, 100],
                            opacityFrom: 0.4,
                            opacityTo: 0.5,
                        }
                    }
                },
                tooltip: {
                    enabled: true,
                }
            },
            yaxis: {
                labels: {
                    show: false,
                    formatter: function(value) {
                        return minTommss(value);
                    }
                },
                axisBorder: {
                    show: true,
                }
            },
            title: {
                //text: 'AVG Time - Module',
                //floating: true,
                offsetY: 0,
                align: 'center',
                style: {
                    color: '#444'
                }
            }
        };

        var avgTimeChartByModule =
            new ApexCharts(document.querySelector("#avgTimeChartByModule"), avgTimeByModuleChartOptions);
        avgTimeChartByModule.render();

        // End AVG Time - Module

        var sessionAvgTimeByUserByModuleOpt = {
            title: {
                // text: 'Sessions (AVG) by User by Module',
                floating: true,
                offsetY: 0,
                align: 'center',
                style: {
                    color: '#444'
                }
            },
            grid: {
                show: false,
            },
            series: [
                {
                    name: 'ME',
                    data: [20, 50, 13]
                }, {
                    name: 'STR',
                    data: [46, 0, 28]
                }, {
                    name: 'SJRL',
                    data: [35, 30, 25]
                }
            ],
            chart: {
                type: 'bar',
                height: 350,
                stacked: true,
                toolbar: {
                    show: false
                },
                zoom: {
                    enabled: true
                }
            },
            responsive: [
                {
                    breakpoint: 480,
                    options: {
                        legend: {
                            position: 'bottom',
                            offsetX: -10,
                            offsetY: 0
                        }
                    }
                }
            ],
            plotOptions: {
                bar: {
                    horizontal: false,
                },
            },
            xaxis: {
                type: 'Category',
                categories: [
                    'U1', 'U2', 'U3'
                ],
                axisBorder: {
                    show: true,
                },
            },
            yaxis: {
                labels: {
                    show: false
                },
                axisBorder: {
                    show: true,
                }
            },
            legend: {
                position: 'right',
                offsetY: 40
            },
            fill: {
                opacity: 1
            }
        };

        var sessionAvgTimeByUserByModuleChart = new ApexCharts(document.querySelector("#sessionSvgByUserByModule"),
            sessionAvgTimeByUserByModuleOpt);
        sessionAvgTimeByUserByModuleChart.render();

        // End Session AVG Time By user By Module

        var userOverTimeOpt = {
            title: {
                //text: 'Users Over Time',
                floating: true,
                offsetY: 0,
                align: 'center',
                style: {
                    color: '#444'
                }
            },
            grid: {
                show: false,
            },
            series: [
                {
                    name: 'Used Lisence',
                    data: [31, 40, 28, 51, 42, 109, 100]
                }, {
                    name: 'Unused Lisence',
                    data: [11, 32, 45, 32, 34, 52, 41]
                }
            ],
            chart: {
                type: 'line',
                height: 350,
                stacked: true,
                toolbar: {
                    show: false
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth'
            },
            xaxis: {
                // title: 'Day',
                type: 'category',
                categories: ["1", "2", "3", "4", "5", "6", "7"],
                axisBorder: {
                    show: true,

                },
            },
            yaxis: {
                axisBorder: {
                    show: true,

                }
            }
            //tooltip: {
            //    x: {
            //        format: 'dd/MM/yy HH:mm'
            //    },
            //},
        };

        var userOverTimeChart = new ApexCharts(document.querySelector("#usersOverTime"), userOverTimeOpt);
        userOverTimeChart.render();

        // End User Over time Chart
        var avgTimeSpentModuleOpt = {
            title: {
                //text: 'AVG Time Spent Module',
                floating: true,
                offsetY: 0,
                align: 'center',
                style: {
                    color: '#444'
                }
            },
            grid: {
                show: false,
            },
            series: [
                {
                    name: 'MZ',
                    data: [31, 40, 28, 51, 42, 109, 100]
                }, {
                    name: 'SJRI',
                    data: [11, 32, 45, 32, 34, 52, 41]
                }, {
                    name: 'SJRL',
                    data: [15, 45, 30, 28, 48, 55, 67]
                }
            ],
            chart: {
                type: 'line',
                height: 350,
                stacked: true,
                toolbar: {
                    show: false
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth'
            },
            xaxis: {
                // title: 'Day',
                type: 'category',
                categories: ["1", "2", "3", "4", "5", "6", "7"],
                axisBorder: {
                    show: true,

                },
            },
            yaxis: {
                axisBorder: {
                    show: true,

                },
            }
            //tooltip: {
            //    x: {
            //        format: 'dd/MM/yy HH:mm'
            //    },
            //},
        };

        var avgTimeSpentModuleChart =
            new ApexCharts(document.querySelector("#avgTimeSpentModule"), avgTimeSpentModuleOpt);
        avgTimeSpentModuleChart.render();

        // End AVG Time spent by Module
        var sessionChartOpt = {
            series: [
                {
                    title: '',
                    data: [35, 46, 20, 80]
                }
            ],
            grid: {
                show: false,
            },
            chart: {
                type: 'bar',
                height: 350,
                toolbar: {
                    show: false
                },
            },
            plotOptions: {
                bar: {
                    horizontal: true,
                }
            },
            dataLabels: {
                enabled: false
            },
            xaxis: {
                categories: ['U1', 'U2', 'U3', 'U4'],
                axisBorder: {
                    show: true,

                },
            },
            yaxis: {
                axisBorder: {
                    show: true,

                },
            }
        };

        var sessionChart = new ApexCharts(document.querySelector("#sessionChart"), sessionChartOpt);
        sessionChart.render();


        //sessionChart.updateSeries() // This method will be used for render data from AJAX
        //and it's has a format which we got from the doc

    </script>
}
